!function(o){var c;function i(t){return"number"==typeof t?t:"string"!=typeof t?(c.log("warn","Wrong encode value: ",t),""):t.replace(/&/g,"&amp;").replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(/([^#-~ |!])/g,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}(c=function(o,t){var r={};function e(){return t?"string"==typeof t?document.querySelector(t):t:document}return r.selectOne=function(){return"string"==typeof o?e().querySelector(o):o},r.select=function(){return"string"==typeof o?e().querySelectorAll(o):[o]},r.iterate=function(e){c.iterate(r.select(o),function(t){"function"==typeof e&&e(t)})},r.show=function(){r.iterate(function(t){t.style.display="block"})},r.hide=function(){r.iterate(function(t){t.style.display="none"})},r.addClass=function(e){r.iterate(function(t){t.classList.add(e)})},r.removeClass=function(e){r.iterate(function(t){t.classList.remove(e)})},r.toggleClass=function(e){r.iterate(function(t){t.classList.toggle(e)})},r.hasClass=function(e){var n=!1,t=c.selectOne();return!!t&&(c.iterate(t.classList,function(t){t===e&&(n=!0)}),n)},r.is=function(t){var e=r.selectOne(o);return e.matches?e.matches(t):e.msMatchesSelector(t)},r.css=function(e,n){r.iterate(function(t){t.style[e]=n})},r.html=function(e){if(void 0===e){var t=r.selectOne(o);return t?t.innerHTML:null}r.iterate(function(t){t.innerHTML=e})},r.append=function(e){r.iterate(function(t){t.innerHTML=t.innerHTML+e})},r.prepend=function(e){r.iterate(function(t){t.innerHTML=e+t.innerHTML})},r.remove=function(){r.iterate(function(t){t.remove()})},r.val=function(e){if(void 0===e){var t=r.selectOne(o);return t?t.value:null}r.iterate(function(t){t.value=e})},r.attr=function(e,n){if(void 0===n){var t=r.selectOne(o);return t?t.getAttribute(e):null}r.iterate(function(t){t.setAttribute(e,n)})},r.data=function(e,n){if(void 0===n){var t=r.selectOne(o);return t?void 0!==e?t.dataset[e]:t.dataset:null}r.iterate(function(t){t.dataset[e]=n})},r.removeAttr=function(e){r.iterate(function(t){t.removeAttribute(e)})},r.on=function(e,n){r.iterate(function(t){t.addEventListener(e,n)})},r.off=function(e,n){r.iterate(function(t){t.removeEventListener(e,n)})},r.click=function(t){r.on("click",t)},r.template=function(t,n){var o=r.html()||"";return c.each(t,function(t,e){o=o.replace("{{"+t+"}}",n?i(e):e)}),o},r.parent=function(){return r.selectOne(o).parentElement},r.parents=function(t){for(var e=r.selectOne(o);e=e.parentElement;)if(e.matches?e.matches(t):e.msMatchesSelector(t))return e;return null},r.upload=function(a){function e(t){t.preventDefault();var e=t.target.files||t.dataTransfer.files;if(e&&e[0])for(var n,o=0;n=e[o];o++){"function"==typeof a.start&&a.start(n);var r=new XMLHttpRequest;r.upload&&(r.upload.onprogress=function(t){var e=t.position||t.loaded,n=t.totalSize||t.total;"function"==typeof a.progress&&a.progress(Math.floor(e/n*1e3)/10)}),r.open("post",a.url,!0),u(r,a.success,a.error),s(r,a.headers);var i=new FormData;a.data&&"function"==typeof a.data?c.each(a.data(),function(t,e){i.append(t,e)}):a.data&&c.each(a.data,function(t,e){i.append(t,e)}),i.append(a.field?a.field:"file",n),r.send(i)}}a&&(r.on("change",function(t){e(t)},!1),a.dropzone&&(c(document).on("dragover",function(t){t.preventDefault()},!1),c(a.dropzone).on("drop",function(t){e(t)},!1)))},r}).iterate=function(t,e){if(t&&t.length)for(var n=0;n<t.length;n++)"function"==typeof e&&e(t[n],n)},c.each=function(t,e){if(t)for(var n in t)t.hasOwnProperty(n)&&"function"==typeof e&&e(n,t[n])},c.trim=function(t){return t&&"string"==typeof t?t.replace(/^\s+/,"").replace(/\s+$/,""):""},c.sanitize=function(t){return i(t)},c.token=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},c.create=function(t){return document.createElement(t)},c.ready=function(t){document.addEventListener("DOMContentLoaded",function(){"function"==typeof t&&t(),e()})},c.log=function(t,e,n){o.console&&"function"==typeof o.console[t]&&(n?o.console[t](e,n):o.console[t](e))};var n={};function u(n,t,o){n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE)if(200<=n.status&&n.status<300){var e;try{e=JSON.parse(n.response)}catch(t){e=n.response}"function"==typeof t&&t(e)}else"function"==typeof o&&o(n.status,n.response)}}function s(n,t){c.each(t,function(t,e){n.setRequestHeader(t,e)})}c.storage={},c.storage.get=function(t){return void 0!==n[t]?n[t]:null},c.storage.set=function(t,e){n[t]=e},c.httpClient={},c.httpClient.uri=function(t,e){var n="",o="";return c.iterate(t,function(t){n+="/"+t}),c.each(e,function(t,e){o+=(""===o?"?":"&")+t+"="+encodeURIComponent(e)}),n+o},c.httpClient.get=function(t){c.httpClient.request("GET",t)},c.httpClient.post=function(t){c.httpClient.request("POST",t)},c.httpClient.put=function(t){c.httpClient.request("PUT",t)},c.httpClient.delete=function(t){c.httpClient.request("DELETE",t)},c.httpClient.request=function(t,e){if(e&&e.url&&"string"==typeof e.url){var n=null;e.data&&(n="plain"===e.type?e.data:JSON.stringify(e.data));var o=new XMLHttpRequest;o.open(t,e.url,!0),e.noCredentials||(o.withCredentials=!0),s(o,e.headers),u(o,e.success,e.error),o.send(n)}};var r={};function e(){var t=document.location.hash.split("/");r[t[0]]&&r[t[0]](t)}c.route=function(t,e){t&&"function"==typeof e&&(r["#"+t]=e)},c.route.navigate=function(t){document.location.hash="#"+t.join("/")},window.onhashchange=e;var a={};c.subscribe=function(t,e,n){var o=-1;return t&&"function"==typeof e&&(a[t]&&!n||(a[t]=[]),o=a[t].push(e)-1),o},c.unsubscribe=function(t,e){a[t]&&a[t][e]&&(a[t][e]=null)},c.emit=function(t,e){c.iterate(a[t],function(t){"function"==typeof t&&t(e)})};var f={};c.handle=function(t,e){t&&"function"==typeof e&&(f[t]=e)},["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout","dragstart","drag","dragenter","dragleave","dragover","drop","dragend","keydown","keypress","keyup","change","contextmenu"].map(function(t){var e,n;n="pi"+(e=t).charAt(0).toUpperCase()+e.slice(1),document.addEventListener(e,function(t){var e=t.target.dataset;e&&e[n]&&f[e[n]]&&f[e[n]](t,t.target,pi(t.target).parents("[data-pi-component]"))})});var l={},p={subscribe:function(t,e){l[t]||(l[t]=[]),"function"==typeof e&&l[t].push(e)},emit:function(t,e){l[t]&&(c.iterate(l[t],function(t){"function"==typeof t&&t(e)}),delete l[t])}},d={};c.loadJS=function(t,e){if(p.subscribe("script-loaded:"+t,e),1!==d[t])if(2!==d[t]){d[t]=1;var n=document.createElement("script");n.onload=function(){d[t]=2,p.emit("script-loaded:"+t)},n.src=t+".js",document.body.appendChild(n)}else p.emit("script-loaded:"+t)};var m={};c.loadCSS=function(t){if(!m[t]){m[t]=!0;var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,document.body.appendChild(e)}};var h={},v={};c.loadHTML=function(e,t,n){p.subscribe("template-loaded:"+e,t),2!==h[e]?1!==h[e]&&(h[e]=1,c.httpClient.get({url:e,noCredentials:!0,success:function(t){v[e]=t,h[e]=2,p.emit("template-loaded:"+e,v[e])},error:function(t,e){"function"==typeof n&&n(t,e)}})):p.emit("template-loaded:"+e,v[e])};var g={},y={};function x(e,t){if(e)if(t){var n={},o=0,r=t.import?t.import.length:0,i=!1;r&&c.iterate(t.import,function(t){g[t]?(n[g[t].name]=g[t].body,o+=1,a()):(p.subscribe("service-loaded:"+t,function(){n[g[t].name]=g[t].body,o+=1,a()}),c.loadJS(t))}),c.loadCSS(t.path+"/"+t.styles),c.loadHTML(t.path+"/"+t.templateUrl,function(t){c('[data-pi-component="'+e+'"]').html(t),i=!0,a()})}else c.log("error",'Error while loading "'+e+'" component - missing configuration');else c.log("error","Error while loading component - root can not be empty");function a(){o===r&&i&&t.init(n,c('[data-pi-component="'+e+'"]').selectOne())}}c.service=function(t,e,n){g[e]={name:t,body:n},p.emit("service-loaded:"+e)},c.component=function(t){t&&t.path&&t.init&&!y[t.path]?(y[t.path]=t,p.emit("component-loaded:"+t.path)):c.log("error","Error while creating component - missing configuration")},c.loadComponent=function(t,e){y[e]?x(t,y[e]):(p.subscribe("component-loaded:"+e,function(){x(t,y[e])}),c.loadJS(e+"/component"))},o.pi=c}(window);